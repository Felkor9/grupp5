CREATE DATABASE reseplanerare;

USE reseplanerare;

CREATE TABLE resor(
    resorId INT NOT NULL AUTO_INCREMENT UNIQUE,
    resorLand VARCHAR(50) NOT NULL ,
    resorDatum DATE NOT NULL,
    resorLangd INT NOT NULL ,
    resorPris INT NOT NULL,
    resorbild_url VARCHAR(50),
    PRIMARY KEY (resorId)
);

CREATE TABLE destination(
    destinationId INT NOT NULL AUTO_INCREMENT UNIQUE,
    destinationStad VARCHAR(50),
    destinationHotell VARCHAR(50),
    destinationResorId INT NOT NULL,
    destinationStadBild_url VARCHAR(50),
    destinationHotellBild_url VARCHAR(50),
    PRIMARY KEY (destinationId),
    FOREIGN KEY (destinationResorId) REFERENCES resor(resorId)
);

CREATE TABLE user(
    userId INT NOT NULL AUTO_INCREMENT UNIQUE ,
    userName VARCHAR(50) NOT NULL,
    userEmail VARCHAR(50) NOT NULL,
    PRIMARY KEY (userId)
);

CREATE TABLE bokningar(
    bokningId INT NOT NULL AUTO_INCREMENT UNIQUE,
    bokningAntalPlatser INT NOT NULL,
    bokningUserId INT NOT NULL ,
    bokningResorId INT NOT NULL ,
    PRIMARY KEY (bokningId),
    FOREIGN KEY (bokningUserId) REFERENCES user(userId),
    FOREIGN KEY (bokningResorId) REFERENCES resor(resorId)
);

INSERT INTO resor(resorLand, resorDatum, resorLangd, resorPris, resorbild_url)
VALUES ('Grekland', '20250912', '7', '9500', 'grekland.jpg'),
       ('Italien', '20250609', '9', '11923', 'italien.jpg'),
       ('Spanien', '20250629', '7', '8999', 'spanien.jpg'),
       ('Portugal', '20250530', '12', '17400', 'portugal.jpg'),
       ('Turkiet', '20250801', '8', '7999', 'turkiet.jpg');

INSERT INTO user(userName, userEmail)
VALUES ('Evelina Jonasson', 'evelina.jonasson@iths.se'), ('Elin Eriksson', 'elin.eriksson@iths.se'), ('Linn Lihnell', 'linn.lihnell@iths.se'), ('Felix Korshavn', 'felix.korshavn@iths.se'), ('Jerry Johansson', 'jerry.johansson@iths.se');

INSERT INTO destination(destinationStad, destinationHotell, destinationResorId, destinationHotellBild_url, destinationStadBild_url)
VALUES ('Aten', 'Sparta Team Hotel',1, 'grekland-hotell.jpg', 'grekland-aten.jpg'),
       ('Sorrento','Hotell Villa Fiorita',2, 'italien-hotell.jpg', 'italien-sorrento.jpg'),
       ('Barcelona', 'Barcelone Princess',3, 'spanien-hotell.jpg', 'spanien-barcelona.jpg'),
       ('Albufeira', 'Aurumar Beach Resort', 4, 'portugal-hotell.jpg', 'portugal-albufeira.jpg'),
       ('Antalya', 'Uyar Palace', 5, 'turkiet-hotell.jpg', 'turkiet-antalya.jpg');

INSERT INTO destination(destinationStad, destinationHotell, destinationResorId, destinationHotellBild_url, destinationStadBild_url)
VALUES ('Aten', 'Four Seasons', 1,'grekland-hotell2.jpg', 'grekland-aten.jpg'),
       ('Sorrento','Sorrento la hotell', 2, 'italien-hotell2.jpg', 'italien-sorrento.jpg'),
       ('Barcelona','Hotel Arts Barcelona', 3, 'spanien-hotell2.jpg', 'spanien-barcelona.jpg'),
       ('Albufeira', 'Plaza hotel', 4,'portugal-hotell2.jpg', 'portugal-albufeira.jpg'),
       ('Antalya', 'Pearly hotel',5,'turkiet-hotell2.jpg','turkiet-antalya.jpg');

INSERT INTO bokningar(bokningAntalPlatser, bokningResorId, bokningUserId)
VALUES (3, 1, 1);

-- SELECTSATSER HÄR
SELECT * FROM resor;
SELECT * FROM user;
SELECT * FROM destination;
SELECT * FROM bokningar;

-- INNER JOIN för bokning - user - resor - destination
SELECT
    bokningar.bokningAntalPlatser,
    user.userName,
    resor.resorLand,
    destination.destinationStad
FROM bokningar
INNER JOIN resor ON bokningar.bokningResorId = resor.resorId
INNER JOIN user ON bokningar.bokningUserId = user.userId
INNER JOIN destination ON resor.resorId = destination.destinationResorId
WHERE userId = 1;

-- INNER JOIN för Resa - destination - hotell
    SELECT
        resor.resorId,
        resor.resorLand,
        destination.destinationStad,
        destination.destinationHotell,
        destination.destinationStadBild_url,
        destination.destinationHotellBild_url
    FROM resor
    INNER JOIN destination ON resor.resorId = destination.destinationResorId
    WHERE resor.resorId = 1;

-- DROP TABLE HÄR I ORDNING
DROP TABLE resor;
DROP TABLE destination;
DROP TABLE user;
DROP TABLE bokningar;
